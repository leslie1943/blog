## CSS: 响应式设计-原理和实现

### 💛 什么是响应式设计?
- 响应式网站设计(Responsive Web Design)是一种网络页面设计布局, 页面的设计与开发根据用户行为及设备环境(系统环境,屏幕尺寸,屏幕定向等)进行相应的响应和调整

- 响应式网站常见特点
1. 同时适配PC + 平板 + 手机等
2. 标签导航在接近手持终端设备时改变为经典的抽屉式导航
3. 网站的布局会根据视口来调整模块的大小和位置


### 💛 实现方式?
- 响应式设计的基本原理是通过媒体查询检测不同的设备屏幕尺寸做处理, 为了处理移动端, 页面头部必须有meta声明viewport
```html
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no”>
```
- `width=device-width`: 是自适应手机屏幕的尺寸宽度
- `maximum-scale`:是缩放比例的最大值
- `inital-scale`:是缩放的初始化
- `user-scalable`:是用户的可以缩放的操作
- 实现方式: `媒体查询`,`百分比`,`vw/vh`,`rem`


#### ✅ 媒体查询
- CSS3中的增加了更多的媒体查询, 就像if条件表达式一样, 我们可以设置不同类型的媒体条件, 并根据对应的条件, 给相应符合条件的媒体调用相对应的样式表
- 使用@Media查询, 可以针对不同的媒体类型定义不同的样式, 如:
```css
@media screen and (max-width:1920px){
    div{
        font-size: 14px;
    }
}
@media screen and (min-width:375px) and (max-width:600px){
    div{
        font-size: 18px;
    }
}
```
- 通过媒体查询, 可以通过给不同分辨率的设备编写不同的样式来实现响应式的布局, 比如我们为不同分辨率的屏幕, 设置不同的背景图片,比如给小屏幕手机设置@2x图, 为大屏幕手机设置@3x图, 通过媒体查询就能很方便的实现

#### ❌ 百分比 (不推荐使用)
- 通过百分比单位 " % " 来实现响应式的效果
- 比如当浏览器的宽度或者高度发生变化时, 通过百分比单位, 可以使得浏览器中的组件的宽和高随着浏览器的变化而变化, 从而实现响应式的效果
- `height`, `width` 属性的百分比依托于父标签的宽高, 但是其他盒子属性则不完全依赖父元素:
1. 子元素的`top/left`和`bottom/right`如果设置百分比, 则相对于直接非 `static` 定位(默认定位)的父元素的高度/宽度
2. 子元素的 `padding` 如果设置百分比, 不论是垂直方向或者是水平方向, 都相对于直接父亲元素的 `width`, `而与父元素的height` 无关
3. 子元素的 `margin` 如果设置成百分比, 不论是垂直方向还是水平方向, 都相对于直接父元素的 `width`
4. `border-radius` 不一样, 如果设置 `border-radius` 为百分比, 则是相对于自身的宽度
- 可以看到每个属性都使用百分比, 会照成布局的复杂度, 所以不建议使用百分比来实现响应式

#### ❌ vw/vh  (不推荐使用)
- vw表示相对于视图窗口的宽度, vh表示相对于视图窗口高度。任意层级元素, 在使用vw单位的情况下, 1vw都等于视图宽度的百分之一
- 与百分比布局很相似, 在以前文章提过与%的区别, 这里就不再展开述说

#### rem
- 在以前也讲到, `rem` 是相对于根元素 `html` 的 `font-size` 属性, 默认情况下浏览器字体大小为 `16px`, 此时 `1rem = 16px`
- 可以利用前面提到的媒体查询, 针对不同设备分辨率改变 `font-size` 的值, 如下:
```css
@media screen and (max-width: 414px) {
  html {
    font-size: 18px
  }
}
@media screen and (max-width: 375px) {
  html {
    font-size: 16px
  }
}
@media screen and (max-width: 320px) {
  html {
    font-size: 12px
  }
}
```
- 为了更准确监听设备可视窗口变化,我们可以在css之前插入script标签,内容如下:
```js
function init(){
    // 获取屏幕宽度
    var width = document.documentElement.clientWidth
    // 设置根元素字体大小, 此时为宽度的 10 等分
    document.documentElement.style.fontSize = width / 10 + 'px'
}

// 首次加载应用,设置一次
init()
// 监听手机旋转的事件的时机,重新设置
window.addEventListener('orientationchange', init)
// 监听手机窗口变化,重新设置
window.addEventListener('resize', init)
```
- 无论设备可视窗口如何变化, 始终设置rem为width的1/10, 实现了百分比布局
除此之外, 我们还可以利用主流UI框架, 如：element ui、antd提供的栅格布局实现响应式

### 小结
- 响应式设计实现通常会从以下几方面思考
1. 弹性盒子 (包括图片、表格、视频) 和媒体查询等技术
2. 使用百分比布局创建流式布局的弹性UI, 同时使用媒体查询限制元素的尺寸和内容变更范围
3. 使用相对单位使得内容自适应调节
4. 选择断点, 针对不同断点实现不同布局和内容展示


## 总结
响应式布局`优点`可以看到
1. 面对不同分辨率设备灵活性强
2. 能够快捷解决多设备显示适应问题
`缺点`
1. 仅适用布局、信息、框架并不复杂的部门类型网站
2. 兼容各种设备工作量大, 效率低下
3. 代码累赘, 会出现隐藏无用的元素, 加载时间加长
4. 其实这是一种折中性质的设计解决方案, 多方面因素影响而达不到最佳效果
5. 一定程度上改变了网站原有的布局结构, 会出现用户混淆的情况